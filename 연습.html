<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>게시판 예제</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>

<body>
    <div id="app">
        <h1>게시판</h1>
        <ul id="post-list">
            <!-- 게시물 목록이 여기에 추가됩니다 -->
        </ul>
        <div id="pagination">
            <!-- 페이지 버튼은 여기에 동적으로 추가됩니다 -->
        </div>
    </div>

    <script>
        // 페이지 로드 및 데이터 불러오기
        async function loadData(pageNumber = 1) {
            try {
                const response = await axios.get('https://jsonplaceholder.typicode.com/posts');
                const posts = response.data;

                page(pageNumber, posts); // 데이터를 이용하여 페이지를 로드합니다.
                createPaginationButtons(pageNumber, posts); //페이지네이션 버튼을 생성합니다.

            } catch (error) {
                console.error('API 호출 중 오류 발생:', error);
            }
        }

        function page(pageNumber, posts) { //화면에 데이터 뿌려주기
            const pageSize = 10;
            const startIndex = (pageNumber - 1) * pageSize;
            const endIndex = startIndex + pageSize;
            const postsToDisplay = posts.slice(startIndex, endIndex);

            const postList = document.getElementById('post-list');
            postList.innerHTML = ''; // 이전 목록을 지웁니다.

            // 불러온 게시물을 목록에 추가합니다.
            postsToDisplay.forEach(post => {
                const listItem = document.createElement('li');
                listItem.textContent = post.title;
                postList.appendChild(listItem);
            });
        }

        function createPaginationButtons(pageNumber, posts) {
            const totalPages = Math.ceil(posts.length / 10); // 전체 페이지 수 계산
            const paginationDiv = document.getElementById('pagination');
            paginationDiv.innerHTML = ''; // 이전 페이지 버튼을 지웁니다.

            const pageSize = 5; // 각 페이지당 표시할 버튼 수
            let startPage = Math.floor((pageNumber - 1) / pageSize) * pageSize + 1;
            let endPage = startPage + pageSize - 1;

            // 마지막 페이지가 전체 페이지 수를 초과하지 않도록 조정
            if (endPage > totalPages) {
                endPage = totalPages;
            }

            // 이전 페이지 버튼을 생성합니다.
            if (pageNumber > pageSize) {
                const prevButton = document.createElement('button');
                prevButton.textContent = '이전';
                prevButton.onclick = function () {
                    loadData(startPage - 1);
                };
                paginationDiv.appendChild(prevButton);
            }

            // 페이지 버튼을 동적으로 생성합니다.
            for (let i = startPage; i <= endPage; i++) {
                const button = document.createElement('button');
                button.textContent = `페이지 ${i}`;
                button.onclick = function () {
                    loadData(i); // 버튼을 클릭하면 해당 페이지를 로드합니다.
                };
                paginationDiv.appendChild(button);
            }

            // 다음 페이지 버튼을 생성합니다.
            if (endPage < totalPages) {
                const nextButton = document.createElement('button');
                nextButton.textContent = '다음';
                nextButton.onclick = function () {
                    loadData(endPage + 1);
                };
                paginationDiv.appendChild(nextButton);
            }
        }

        // 페이지 로드 및 데이터 불러오기 함수 호출
        loadData();
    </script>
</body>

</html>